# mac-accessibility-check

A Node.js native addon for checking macOS accessibility permissions (AXIsProcessTrusted) from Node.js and Electron applications.

## Features

- Check if the current process has accessibility permissions
- Prompt for accessibility authorization with system dialog
- Works with both Node.js and Electron applications
- Supports macOS 10.15+ (Catalina and later)
- Supports both Intel (x64) and Apple Silicon (arm64) architectures

## Installation

```bash
npm install mac-accessibility-check
```

## Usage

### Basic Usage

```javascript
const accessibilityCheck = require('mac-accessibility-check');

// Check if accessibility permissions are granted
const hasPermissions = accessibilityCheck.isTrusted();
console.log('Has accessibility permissions:', hasPermissions);

// Check permissions and prompt for authorization if needed
const hasPermissionsWithPrompt = accessibilityCheck.isTrustedPrompt();
console.log('Has accessibility permissions (with prompt):', hasPermissionsWithPrompt);
```

### TypeScript Usage

```typescript
import accessibilityCheck, { isTrusted, isTrustedPrompt } from 'mac-accessibility-check';

// Using named imports
const hasPermissions = isTrusted();
const hasPermissionsWithPrompt = isTrustedPrompt();

// Using default import
const hasPermissions2 = accessibilityCheck.isTrusted();
```

### Electron Usage

```javascript
const { app } = require('electron');
const accessibilityCheck = require('mac-accessibility-check');

app.whenReady().then(() => {
  // Check accessibility permissions in Electron
  if (!accessibilityCheck.isTrusted()) {
    console.log('Accessibility permissions not granted');
    // You can show a dialog to guide users to enable permissions
  }
});
```

## API Reference

### `isTrusted(): boolean`

Checks if the current process has accessibility permissions granted.

**Returns:** `boolean` - `true` if the process is trusted, `false` otherwise

**Note:** This function only checks the current permission status and does not prompt the user.

### `isTrustedPrompt(): boolean`

Checks accessibility permissions and prompts for authorization if needed.

**Returns:** `boolean` - `true` if the process is trusted, `false` otherwise

**Note:** This function will show the system accessibility authorization dialog if permissions are not granted.

## Building from Source

If you need to build from source (e.g., for a different Node.js version):

```bash
npm run build
```

## Development

```bash
# Install dependencies
npm install

# Build the native addon
npm run build

# Clean build artifacts
npm run clean

# Run tests
npm test
```

## Requirements

- macOS 10.15 (Catalina) or later
- Node.js 14.0.0 or later
- Xcode Command Line Tools

## Troubleshooting

### Permission Denied Errors

If you encounter permission issues:

1. Go to **System Preferences** > **Security & Privacy** > **Privacy** > **Accessibility**
2. Add your application to the list
3. Check the checkbox next to your application

### Build Errors

If you encounter build errors:

1. Make sure you have Xcode Command Line Tools installed:
   ```bash
   xcode-select --install
   ```

2. Ensure you're using a compatible Node.js version (14.0.0+)

3. Try cleaning and rebuilding:
   ```bash
   npm run clean
   npm run build
   ```

## License

MIT

## Contributing

This project was generated by AI. Contributions are welcome!
